type Packet @entity(immutable: false) {
  id: ID!
  packetId: BigInt!
  creator: Bytes!
  totalAmount: BigInt!
  remainAmount: BigInt!
  totalCount: BigInt!
  remainCount: BigInt!
  isRandom: Boolean!
  timestamp: BigInt!
  expirationTime: BigInt!
  isFinished: Boolean!
  claims: [Claim!]! @derivedFrom(field: "packet")
  createdAt: BigInt!
  finishedAt: BigInt
}

type Claim @entity(immutable: true) {
  id: ID!
  packet: Packet!
  claimer: User!
  amount: BigInt!
  timestamp: BigInt!
}

type User @entity(immutable: false) {
  id: ID!
  address: Bytes!
  packetsCreated: [Packet!]!
  claims: [Claim!]! @derivedFrom(field: "claimer")
  totalClaimed: BigInt!
  totalCreated: BigInt!
}
